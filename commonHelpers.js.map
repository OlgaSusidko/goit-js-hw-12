{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// функції для HTTP-запитів\nimport axios from 'axios';\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n    export const limit = 15;\nexport async function searchImagesByQuery(query, page) {\n    const API_KEY = \"45271778-6269ea34eb71195547930c138\";\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: limit,\n    })\n     \n    const {data} = await axios.get(`?${params}`);\n    return data;\n}","// функції для відображення елементів інтерфейсу\n\nexport function createGalery({ hits }) {\n    return hits.map( ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n     <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n  </a>\n  <ul class=\"galery-attribute-list\">\n    <li class=\"attribute-item\">\n          <p class=\"attribute\">Likes</p>\n          <p class=\"attribute-value\">${likes}</p>\n        </li>\n        <li class=\"attribute-item\">\n          <p class=\"attribute\">Views</p>\n          <p class=\"attribute-value\">${views}</p>\n        </li>\n        <li class=\"attribute-item\">\n          <p class=\"attribute\">Comments</p>\n          <p class=\"attribute-value\">${comments}</p>\n        </li>\n        <li class=\"attribute-item\">\n          <p class=\"attribute\">Downloads</p>\n          <p class=\"attribute-value\">${downloads}</p>\n        </li>\n        </ul>\n</li>`\n).join(\"\");\n}\n","\n// вся логіка роботи додатка\n\nimport { searchImagesByQuery, limit } from './js/pixabay-api.js';\nimport { createGalery } from './js/render-functions.js';\n \nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form-search');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.btn-load')\n\nlet currentPage = 1;\nlet inputValue = '';\n\nform.addEventListener('submit', handleFormSubmit);\n\nloader.style.display = 'none';\nloadMore.style.display = 'none';\n\nasync function handleFormSubmit(event) {\n    event.preventDefault();\n  \n     inputValue = event.target.elements.query.value.trim().toLowerCase();\n\n     if (inputValue === '') {\n       gallery.innerHTML = '';\n       loadMore.style.display = 'none';\n    iziToast.error({\n      message: 'Please enter a search query.',\n    });\n         return;\n  };\n    \n    loader.style.display = 'block';\n  gallery.innerHTML = '';\n  currentPage = 1;\n\n  try {\n    const data = await searchImagesByQuery(inputValue, currentPage);\n    console.log(data);\n    \n    if (data.totalHits === 0) {\n       loadMore.style.display = 'none';\n            iziToast.error({\n                message: `❌ Sorry, there are no images matching your search query. Please try again!`,\n            });\n      return;\n    };\n        const imgMarkup = createGalery(data);\n        gallery.insertAdjacentHTML('beforeend', imgMarkup);\n      loadMore.style.display = 'block';\n      scrollPage();\n        modal.refresh();\n\n        if (data.totalHits > limit) {\n            loadMore.style.display = 'block';\n        } else {\n            loadMore.style.display = 'none';\n        };\n    } catch(error){\n        (console.log(error))\n    } finally {\n      loader.style.display = 'none';\n      form.reset();\n    }\n};\n\nloadMore.addEventListener('click', async () => {\n  currentPage += 1;\n  loader.style.display = 'block';\n\n  try {\n    const data = await searchImagesByQuery(inputValue, currentPage);\n    const imgMarkup = createGalery(data);\n    gallery.insertAdjacentHTML('beforeend', imgMarkup);\n    scrollPage();\n    modal.refresh();\n\n    const totalPages = Math.ceil(data.totalHits / limit);\n\n    if (inputValue === '') {\n       gallery.innerHTML = '';\n    iziToast.error({\n      message: 'Please enter a search query.',\n    });\n         return;\n    }\n\n    if (currentPage >= totalPages) {\n      loadMore.style.display = 'none';\n      iziToast.error({\n                message: `❌ We're sorry, but you've reached the end of search results.`,\n            });\n    }\n  } catch (error) {\n    console.log(error)\n  } finally {\n    loader.style.display = 'none';\n  }\n});\n\nfunction scrollPage() {\n  const card = document.querySelector('.gallery-item');\n\n  window.scrollBy({\n    top: card.getBoundingClientRect().height * 2,\n    behavior: 'smooth',\n  });\n}\n\nlet modal = new SimpleLightbox('.gallery .gallery-link', {captionsData: 'alt',\n  captionDelay: 250,\n});\n  \n  iziToast.settings({\n  class: 'izi-toast',\n  position: 'topRight',\n  backgroundColor: 'rgba(239, 64, 64, 1)',\n  progressBarColor: 'rgba(181, 27, 27, 1)',\n  theme: 'dark',\n  });\n\n"],"names":["axios","limit","searchImagesByQuery","query","page","API_KEY","params","data","createGalery","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","form","loader","loadMore","currentPage","inputValue","handleFormSubmit","event","iziToast","imgMarkup","scrollPage","modal","error","totalPages","card","SimpleLightbox"],"mappings":"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"}