{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// функції для HTTP-запитів\nimport axios from 'axios';\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n    export const limit = 15;\nexport async function searchImagesByQuery(query, page) {\n    const API_KEY = \"45271778-6269ea34eb71195547930c138\";\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: limit,\n    })\n     \n    const {data} = await axios.get(`?${params}`);\n    return data;\n}","// функції для відображення елементів інтерфейсу\n\nexport function createGalery({ hits }) {\n    return hits.map( ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n     <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n  </a>\n  <ul class=\"galery-attribute-list\">\n    <li class=\"attribute-item\">\n          <p class=\"attribute\">Likes</p>\n          <p class=\"attribute-value\">${likes}</p>\n        </li>\n        <li class=\"attribute-item\">\n          <p class=\"attribute\">Views</p>\n          <p class=\"attribute-value\">${views}</p>\n        </li>\n        <li class=\"attribute-item\">\n          <p class=\"attribute\">Comments</p>\n          <p class=\"attribute-value\">${comments}</p>\n        </li>\n        <li class=\"attribute-item\">\n          <p class=\"attribute\">Downloads</p>\n          <p class=\"attribute-value\">${downloads}</p>\n        </li>\n        </ul>\n</li>`\n).join(\"\");\n}\n","\n// вся логіка роботи додатка\n\nimport { searchImagesByQuery, limit } from './js/pixabay-api.js';\nimport { createGalery } from './js/render-functions.js';\n \nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form-search');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.btn-load')\n\nlet currentPage = 1;\nlet inputValue = '';\n\nform.addEventListener('submit', handleFormSubmit);\n\nloader.style.display = 'none';\nloadMore.style.display = 'none';\n\nasync function handleFormSubmit(event) {\n    event.preventDefault();\n    \n     inputValue = event.target.elements.query.value.trim().toLowerCase();\n\n     if (inputValue === '') {\n    gallery.innerHTML = '';\n    iziToast.error({\n      message: 'Please enter a search query.',\n    });\n         return;\n     }\n    \n    loader.style.display = 'block';\n    \n    try {\n        const data = await searchImagesByQuery(inputValue, currentPage);\n        const imgMarkup = createGalery(data);\n        gallery.insertAdjacentHTML('beforeend', imgMarkup);\n        loadMore.style.display = 'block';\n        modal.refresh();\n\n         if (data.totalHits === 0) {\n            iziToast.error({\n                message: `❌ Sorry, there are no images matching your search query. Please try again!`,\n            });\n        }\n\n        if (data.totalHits > limit) {\n            loadMore.style.display = 'block';\n        } else {\n            loadMore.style.display = 'none';\n        };\n    } catch {\n        \n        (console.log)\n    } finally {\n        loader.style.display = 'none';\n      form.reset();\n    }\n};\n\nloadMore.addEventListener('click', async () => {\n  currentPage += 1;\n  loader.style.display = 'block';\n\n  try {\n    const data = await searchImages(inputValue, currentPage);\n    const imgMarkup = createGalery(data);\n    gallery.insertAdjacentHTML('beforeend', imgMarkup);\n    lightbox.refresh();\n\n    const totalPages = Math.ceil(data.totalHits / limit);\n\n    if (currentPage >= totalPages) {\n      loadMore.style.display = 'none';\n      iziToast.error({\n                message: `❌ We're sorry, but you've reached the end of search results.`,\n            });\n    }\n  } catch  {(console.log)\n  } finally {\n    loader.style.display = 'none';\n  }\n});\n\n\nlet modal = new SimpleLightbox('.gallery .gallery-link', {captionsData: 'alt',\n  captionDelay: 250,});\n\n  iziToast.settings({\n  class: 'izi-toast',\n  position: 'topRight',\n  backgroundColor: 'rgba(239, 64, 64, 1)',\n  progressBarColor: 'rgba(181, 27, 27, 1)',\n  theme: 'dark',\n  });\n\n"],"names":["axios","limit","searchImagesByQuery","query","page","API_KEY","params","data","createGalery","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","form","loader","loadMore","currentPage","inputValue","handleFormSubmit","event","iziToast","imgMarkup","modal","totalPages","SimpleLightbox"],"mappings":"owBAGAA,EAAM,SAAS,QAAU,2BACd,MAAMC,EAAQ,GAClB,eAAeC,EAAoBC,EAAOC,EAAM,CACnD,MAAMC,EAAU,qCAEVC,EAAS,IAAI,gBAAgB,CAC/B,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUH,CAClB,CAAK,EAEK,CAAC,KAAAM,CAAI,EAAI,MAAMP,EAAM,IAAI,IAAIM,CAAM,EAAE,EAC3C,OAAOC,CACX,CClBO,SAASC,EAAa,CAAE,KAAAC,GAAQ,CACnC,OAAOA,EAAK,IAAK,CAAC,CACd,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,sCAE0BL,CAAa;AAAA;AAAA;AAAA,aAGtCD,CAAY;AAAA,aACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAMsBC,CAAK;AAAA;AAAA;AAAA;AAAA,uCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,uCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,uCAIRC,CAAS;AAAA;AAAA;AAAA,MAIhD,EAAE,KAAK,EAAE,CACT,CC5BA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,SAAS,cAAc,WAAW,EAEnD,IAAIC,EAAc,EACdC,EAAa,GAEjBJ,EAAK,iBAAiB,SAAUK,CAAgB,EAEhDJ,EAAO,MAAM,QAAU,OACvBC,EAAS,MAAM,QAAU,OAEzB,eAAeG,EAAiBC,EAAO,CAKlC,GAJDA,EAAM,eAAc,EAEnBF,EAAaE,EAAM,OAAO,SAAS,MAAM,MAAM,OAAO,cAElDF,IAAe,GAAI,CACxBL,EAAQ,UAAY,GACpBQ,EAAS,MAAM,CACb,QAAS,8BACf,CAAK,EACI,MACH,CAEFN,EAAO,MAAM,QAAU,QAEvB,GAAI,CACA,MAAMZ,EAAO,MAAML,EAAoBoB,EAAYD,CAAW,EACxDK,EAAYlB,EAAaD,CAAI,EACnCU,EAAQ,mBAAmB,YAAaS,CAAS,EACjDN,EAAS,MAAM,QAAU,QACzBO,EAAM,QAAO,EAERpB,EAAK,YAAc,GACpBkB,EAAS,MAAM,CACX,QAAS,4EACzB,CAAa,EAGDlB,EAAK,UAAYN,EACjBmB,EAAS,MAAM,QAAU,QAEzBA,EAAS,MAAM,QAAU,MAErC,MAAY,CAGZ,QAAc,CACND,EAAO,MAAM,QAAU,OACzBD,EAAK,MAAK,CACX,CACL,CAEAE,EAAS,iBAAiB,QAAS,SAAY,CAC7CC,GAAe,EACfF,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMZ,EAAO,MAAM,aAAae,EAAYD,CAAW,EACjDK,EAAYlB,EAAaD,CAAI,EACnCU,EAAQ,mBAAmB,YAAaS,CAAS,EACjD,SAAS,QAAO,EAEhB,MAAME,EAAa,KAAK,KAAKrB,EAAK,UAAYN,CAAK,EAE/CoB,GAAeO,IACjBR,EAAS,MAAM,QAAU,OACzBK,EAAS,MAAM,CACL,QAAS,8DACzB,CAAa,EAEb,MAAW,CACX,QAAY,CACRN,EAAO,MAAM,QAAU,MACxB,CACH,CAAC,EAGD,IAAIQ,EAAQ,IAAIE,EAAe,yBAA0B,CAAC,aAAc,MACtE,aAAc,GAAG,CAAE,EAEnBJ,EAAS,SAAS,CAClB,MAAO,YACP,SAAU,WACV,gBAAiB,uBACjB,iBAAkB,uBAClB,MAAO,MACT,CAAG"}